<!DOCTYPE html>
<html>
<head>
    <title>GitHub Authentication</title>
</head>
<body>
    <script>
        // Simple OAuth callback for Netlify CMS
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const error = urlParams.get('error');
            
            if (error) {
                document.body.innerHTML = '<h1>Authentication Error</h1><p>' + error + '</p>';
                return;
            }
            
            if (code) {
                // Post the code back to the parent window
                if (window.opener) {
                    window.opener.postMessage({
                        type: 'oauth-callback',
                        code: code
                    }, '*');
                    window.close();
                } else {
                    document.body.innerHTML = '<h1>Authentication Successful!</h1><p>You can close this window.</p>';
                }
            } else {
                document.body.innerHTML = '<h1>No authorization code received</h1><p>Please try again.</p>';
            }
        })();
    </script>
</body>
</html>